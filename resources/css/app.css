@import '../../vendor/livewire/flux/dist/flux.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    *,
    ::after,
    ::before,
    ::backdrop,
    ::file-selector-button {
        border-color: var(--color-gray-200, currentColor);
    }
}

/* Modern forced-colors support for accessibility */
@media (forced-colors: active) {
    /* Ensure proper contrast in high contrast mode */
    * {
        forced-color-adjust: auto;
    }
    
    /* Improve button and link visibility */
    button, a, [role="button"] {
        forced-color-adjust: none;
    }
    
    /* Ensure form elements are visible */
    input, textarea, select {
        forced-color-adjust: none;
    }
    
    /* Improve focus indicators */
    :focus-visible {
        outline: 2px solid CanvasText;
        outline-offset: 2px;
    }
}

/* Override any legacy -ms-high-contrast styles from frameworks */
@media (-ms-high-contrast: active), (-ms-high-contrast: none) {
    /* This will override any legacy high-contrast styles */
    * {
        forced-color-adjust: auto;
    }
}

[data-flux-field]:not(ui-radio, ui-checkbox) {
    @apply grid gap-2;
}

[data-flux-label] {
    @apply  !mb-0 !leading-tight;
}

input:focus[data-flux-control],
textarea:focus[data-flux-control],
select:focus[data-flux-control] {
    @apply outline-none ring-2 ring-blue-500 ring-offset-2;
}

/* Improved contrast for light mode */
@layer components {
    /* Darker borders for inputs in light mode */
    .border-gray-300:not(.dark *) {
        border-color: rgb(203 213 225) !important; /* slate-300 - more visible */
    }
    
    /* Stronger card borders in light mode */
    .shadow:not(.dark *) {
        box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1),
                    0 0 0 1px rgb(226 232 240 / 0.5); /* Add subtle border */
    }
    
    /* Better contrast for secondary buttons in light mode */
    .bg-white:not(.dark *) {
        background-color: rgb(249 250 251) !important; /* gray-50 */
    }
    
    /* Darker text for better readability */
    .text-gray-600:not(.dark *) {
        color: rgb(71 85 105) !important; /* slate-600 */
    }
    
    .text-gray-700:not(.dark *) {
        color: rgb(51 65 85) !important; /* slate-700 */
    }
    
    /* Stronger hover states for light mode buttons */
    .hover\:bg-gray-50:hover:not(.dark *) {
        background-color: rgb(241 245 249) !important; /* slate-100 */
    }
}

/* Fix TinyMCE sink element in modals - prevent it from covering the entire modal */
/* This must be in global CSS (not scoped) to work in production builds */
.tox-silver-sink {
    position: absolute !important;
    width: auto !important;
    max-width: 100% !important;
    pointer-events: none !important;
    z-index: 1000 !important;
    left: 0 !important;
    top: 0 !important;
    height: auto !important;
}

/* Ensure TinyMCE dropdowns and menus work properly */
.tox-silver-sink > * {
    pointer-events: auto !important;
}

/* Fix TinyMCE menu positioning in modals */
.tox-menu {
    z-index: 1001 !important;
}

.tox-collection {
    z-index: 1001 !important;
}